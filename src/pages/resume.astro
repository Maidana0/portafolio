---
// src/pages/resume.astro
import Layout from "@layouts/Layout.astro";
import Header from "@components/resume/Header.astro";
import Section from "@components/resume/Section.astro";
import EducationItem from "@components/resume/EducationItem.astro";
import ExperienceItem from "@components/resume/ExperienceItem.astro";
import Navigation from "@components/common/navigation/Navigation.astro";
import SkillPill from "@components/resume/SkillPill.tsx";
import { TooltipProvider } from "@components/ui/tooltip";
import { resumeNavigation } from "@data/resume/navigation";
import { resumeContent, SKILL_COLORS } from "@data/resume/content";
// --- sections icons ---
import {
  FaUser,
  FaBriefcase,
  FaGraduationCap,
  FaCode,
  FaUsers,
} from "react-icons/fa";
// --- Data & Color Definitions ---
const {
  personalInfo,
  professionalProfile,
  experience,
  education,
  skills,
  softSkills,
} = resumeContent;
---

<Layout>
  <div class="p-6 max-w-4xl mx-auto space-y-8">
    <Header {...personalInfo} />
    <Navigation items={resumeNavigation} />

    <Section
      id="profile"
      title="Perfil Profesional"
      Icon={FaUser}
      className="space-y-1"
    >
      {
        professionalProfile.map((paragraph) => (
          <p class="text-muted-foreground text-sm sm:text-base">{paragraph}</p>
        ))
      }
    </Section>

    <Section
      id="experience"
      title="Experiencia en Equipo y Proyectos Relevantes"
      Icon={FaBriefcase}
    >
      {
        experience.map((item) => (
          <ExperienceItem
            role={item.role}
            company={item.company}
            date={item.date}
          >
            <ul class="list-disc list-inside space-y-1">
              {item.description.map((point) => (
                <li set:html={point} />
              ))}
            </ul>
          </ExperienceItem>
        ))
      }
    </Section>

    <Section id="education" title="Educación" Icon={FaGraduationCap}>
      {education.map((item) => <EducationItem {...item} />)}
    </Section>

    <Section id="skills" title="Habilidades Técnicas" Icon={FaCode}>
      <TooltipProvider client:load>
        <div class="space-y-4">
          {
            Object.entries(skills).map(([category, skillList]) => (
              <div>
                <h4 class="font-medium text-sm sm:text-base mb-2">
                  {category}
                </h4>
                <div class="flex flex-wrap gap-2 px-2">
                  {skillList.map((skill) => (
                    <SkillPill
                      client:visible
                      name={skill.name}
                      icon={skill.icon}
                      colorClasses={SKILL_COLORS[category]}
                    />
                  ))}
                </div>
              </div>
            ))
          }
        </div>
      </TooltipProvider>
    </Section>

    <Section id="soft-skills" title="Competencias Blandas" Icon={FaUsers}>
      <ul
        class="list-disc list-inside text-sm sm:text-base text-muted-foreground space-y-1"
      >
        {softSkills.map((skill) => <li>{skill}</li>)}
      </ul>
    </Section>
  </div>
</Layout>
<style>
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }
</style>
