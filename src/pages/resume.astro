---
import Layout from "@layouts/Layout.astro";
import Header from "@components/resume/Header.astro";
import Section from "@components/resume/Section.astro";
import EducationItem from "@components/resume/EducationItem.astro";
import ExperienceItem from "@components/resume/ExperienceItem.astro";
import Navigation from "@components/common/navigation/Navigation.astro";
import SkillPill from "@components/resume/SkillPill.tsx";
import { TooltipProvider } from "@components/ui/tooltip";
import { resumeNavigation } from "@data/resume/navigation";
import { resumeContent, SKILL_COLORS } from "@data/resume/content";
import {
  FaUser,
  FaBriefcase,
  FaGraduationCap,
  FaCode,
  FaUsers,
} from "react-icons/fa";
---

<Layout mainClassName="container mx-auto my-6 md:my-12 px-6 md:px-12">
  <Navigation items={resumeNavigation} slot="outMainSlot" />

  <!-- Header Section -->
  <Header {...resumeContent.personalInfo} />

  <!-- Profile Section -->
  <Section
    id="profile"
    title={resumeContent.professionalProfile.title}
    Icon={FaUser}
    className="space-y-4"
  >
    {
      resumeContent.professionalProfile.paragraphs.map((paragraph) => (
        <p class="text-muted-foreground text-sm sm:text-base leading-relaxed">
          {paragraph}
        </p>
      ))
    }
  </Section>

  <!-- Experience Section -->
  <Section
    id="experience"
    title={resumeContent.experience.title}
    Icon={FaBriefcase}
  >
    {
      resumeContent.experience.items.map((item) => (
        <ExperienceItem
          role={item.role}
          company={item.company}
          date={item.date}
        >
          <ul class="list-disc list-inside space-y-2">
            {item.description.map((point) => (
              <li class="text-sm sm:text-base" set:html={point} />
            ))}
          </ul>
        </ExperienceItem>
      ))
    }
  </Section>

  <!-- Education Section -->
  <Section
    id="education"
    title={resumeContent.education.title}
    Icon={FaGraduationCap}
  >
    {resumeContent.education.items.map((item) => <EducationItem {...item} />)}
  </Section>

  <!-- Skills Section -->
  <Section id="skills" title={resumeContent.skills.title} Icon={FaCode}>
    <TooltipProvider client:load>
      <div class="space-y-6">
        {
          Object.entries(resumeContent.skills.items).map(
            ([category, skillList]) => (
              <div class="space-y-3">
                <h4 class="font-semibold text-base sm:text-lg text-foreground">
                  {category}
                </h4>
                <div class="flex flex-wrap gap-2">
                  {skillList.map((skill) => (
                    <SkillPill
                      client:visible
                      name={skill.name}
                      icon={skill.icon}
                      colorClasses={SKILL_COLORS[category]}
                    />
                  ))}
                </div>
              </div>
            )
          )
        }
      </div>
    </TooltipProvider>
  </Section>

  <!-- Soft Skills Section -->
  <Section
    id="soft-skills"
    title={resumeContent.softSkills.title}
    Icon={FaUsers}
  >
    <ul class="space-y-3">
      {
        resumeContent.softSkills.items.map((skill) => (
          <li class="flex items-start gap-3">
            <span class="w-2 h-2 rounded-full bg-primary mt-2 flex-shrink-0" />
            <span class="text-sm sm:text-base text-muted-foreground">
              {skill}
            </span>
          </li>
        ))
      }
    </ul>
  </Section>
</Layout>
<style>
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }
</style>
